INSERT INTO city(id, name)
VALUES (1, 'Kyiv'),
       (2, 'Vinnitsya'),
       (3, 'Kharkiv'),
       (4, 'London'),
       (5, 'Lviv');
INSERT INTO street(id, name, city_id)
VALUES (1, 'Arsenalnaya', 1),
       (2, 'Shevchenko', 1),
       (3, 'Kyivskaya', 2),
       (4, 'Magistrtskaya', 2),
       (5, 'Lesnaya', 3),
       (6, 'Zelenaya', 3),
       (7, 'Krasnaya', 3),
       (8, 'Chornya', 2),
       (9, 'Franka', 1),
       (10, 'Fantastichna', 1);
INSERT INTO supermarket(id, name, street_id, house_number)
VALUES (1, 'Best Choice', 1, '122'),
       (2, 'Best Choice', 2, '13B'),
       (3, 'Smart Choice', 3, '177A'),
       (4, 'Smart Choice', 4, '8/A'),
       (5, 'Your Choice', 5, '12'),
       (6, 'Cheep Choice', 6, '5A'),
       (7, 'kramnichka', 7, '10'),
       (8, 'FastMart', 8, '5A'),
       (9, 'Small market', 9, '89'),
       (10, 'Big mall', 10, '101'),
       (11, 'Nice mall', 10, '10A'),
       (12, 'Metro', 2, '12A'),
       (13, 'Swey mall', 3, '5A'),
       (14, 'Boo mall', 4, '23/A'),
       (15, 'goo mall', 5, '23-A');
INSERT INTO person(id, name, surname, birth_date)
VALUES (1, 'Yevgen', 'Kojevskiy', '2000-01-01'),
       (2, 'Yan', 'Petrenko', '2001-11-01'),
       (3, 'Janna', 'Ivanova', '2002-12-12'),
       (4, 'Denis', 'Galushko', '1995-10-01'),
       (5, 'Filip', 'Kromvel', '1980-08-08'),
       (6, 'Bogdan', 'Steciuk', '2002-07-01'),
       (7, 'Yeva', 'Krasivaya', '1992-08-08'),
       (8, 'Nadegda', 'Vesela', '1997-05-11'),
       (9, 'Arsen', 'Govorliviy', '1990-11-21'),
       (10, 'Mariya', 'Velikolepnaya', '1988-04-01'),
       (11, 'Dasha', 'Ruda', '1987-10-01'),
       (12, 'Bohdan', 'Chervoniy', '1950-12-01'),
       (13, 'Ivan', 'Chorniy', '2000-13-01'),
       (14, 'Vasyl', 'Anotin', '2001-12-12'),
       (15, 'Leha', 'Katin', '1977-12-12'),
       (16, 'Vadim', 'Patin', '1966-08-08'),
       (17, 'Vova', 'Yellow', '1998-04-02'),
       (18, 'Katya', 'Adushkina', '1999-03-04'),
       (19, 'Roman', 'Valekiy', '2010-06-05'),
       (20, 'Ivan', 'Paliy', '1994-08-07'),
       (21, 'Dima', 'Visokiy', '1954-05-10'),
       (22, 'Bohdan', 'Krasov', '1965-10-11'),
       (23, 'Yarik', 'Shevchenko', '1996-12-04'),
       (24, 'Stepan', 'Franko', '1999-10-02'),
       (25, 'Sasha', 'Shevchuk', '1967-11-05'),
       (26, 'Maksym', 'Ukranin', '1978-12-04'),
       (27, 'Stepan', 'Opertan', '1998-04-05'),
       (28, 'Anton', 'Antonov', '1998-04-01'),
       (29, 'Artem', 'Artemov', '1999-06-02'),
       (30, 'Ivan', 'Artemov', '1969-07-21'),
       (31, 'Petro', 'Artemov', '2003-01-02'),
       (32, 'Vika', 'Bashynskaya', '2000-05-03'),
       (33, 'Ivan', 'Paliy', '1994-08-07'),
       (34, 'Lesyk', 'Paliy', '1998-02-05'),
       (35, 'Mykyta', 'Paliy', '2001-03-12'),
       (36, 'Kolya', 'Katin', '1977-12-12'),
       (37, 'Adam', 'Katin', '1997-04-19'),
       (38, 'Misha', 'Katin', '2000-01-02'),
       (39, 'Eva', 'Katin', '2005-07-09'),
       (40, 'Maksym', 'Chorniy', '2002-03-18'),
       (41, 'Andriy', 'Chorniy', '2001-04-11');

INSERT INTO contact_type(id, name)
VALUES (1, 'phone'),
       (2, 'email'),
       (3, 'skype'),
       (4, 'viber');
INSERT INTO person_contact(id, person_id, contact_type_id, contact_value)
VALUES (1, 9, 1, '+38(077)123-45-67'),
       (2, 9, 2, 'user9@example.com'),
       (3, 10, 1, '+38(088)123-45-67'),
       (4, 10, 2, 'user10@example.com'),
       (5, 8, 1, '+38(099)123-45-67'),
       (6, 8, 2, 'user8@example.com'),
       (7, 7, 1, '+38(007)123-45-67'),
       (8, 7, 2, 'user7@example.com'),
       (9, 6, 1, '+38(066)123-45-67'),
       (10, 6, 2, 'user6@example.com'),
       (11, 5, 1, '+38(055)123-45-67'),
       (12, 5, 2, 'user5@example.com'),
       (13, 4, 1, '+38(044)123-45-67'),
       (14, 4, 2, 'user4@example.com'),
       (15, 3, 1, '+38(033)123-45-67'),
       (16, 3, 2, 'user3@example.com'),
       (17, 2, 1, '+38(022)123-45-67'),
       (18, 2, 2, 'user2@example.com'),
       (19, 1, 1, '+38(011)123-45-67'),
       (20, 1, 2, 'user1@example.com'),
       (21, 1, 3, 'skype1'),
       (22, 11, 1, 'user11@example.com'),
       (23, 11, 2, '+38(111)123-45-67'),
       (24, 12, 1, 'user12@example.com'),
       (25, 12, 2, '+38(112)123-45-67'),
       (26, 13, 1, 'user13@example.com'),
       (27, 13, 2, '+38(113)123-45-67'),
       (28, 14, 1, 'user14@example.com'),
       (29, 14, 2, '+38(114)123-45-67'),
       (30, 15, 1, 'user15@example.com'),
       (31, 15, 2, '+38(115)123-45-67'),
       (32, 16, 1, 'user16@example.com'),
       (33, 16, 2, '+38(116)123-45-67'),
       (34, 16, 4, 'viber16'),
       (35, 17, 1, 'user17@example.com'),
       (36, 17, 2, '+38(117)123-45-67'),
       (37, 17, 3, 'skype17'),
       (38, 18, 1, 'user18@example.com'),
       (39, 18, 2, '+38(118)123-45-67'),
       (40, 18, 3, 'skype18'),
       (41, 19, 1, 'user19@example.com'),
       (42, 19, 2, '+38(119)123-45-67'),
       (43, 19, 3, 'skype19'),
       (44, 20, 1, 'user20@example.com'),
       (45, 21, 1, 'user21@example.com'),
       (46, 22, 1, 'user22@example.com'),
       (47, 23, 1, 'user23@example.com'),
       (48, 24, 1, 'user24@example.com'),
       (49, 25, 1, 'user25@example.com'),
       (50, 26, 1, 'user26@example.com'),
       (51, 27, 1, 'user27@example.com'),
       (52, 28, 1, 'user28@example.com'),
       (53, 29, 1, 'user29@example.com'),
       (54, 30, 1, 'user30@example.com');
INSERT INTO customer(person_id, card_number, discount)
VALUES (1, 921212121, 0.10),
       (2, 935456021, 0.02),
       (3, 909090283, 0.10),
       (4, 120985320, 0.02),
       (5, 437238943, 0.10),
       (6, 129034871, 0.02),
       (7, 438927489, 0.05),
       (8, 321794012, 0.05),
       (9, 218324131, 0),
       (10, 423443222, 0),
       (11, 4324236, 0),
       (12, 34912748, 0),
       (13, 231893122, 0.10),
       (14, 2130931293, 0.10),
       (15, 23418941894, 0.05),
       (16, 2341034128931, 0.05),
       (17, 231983189, 0.05),
       (18, 213839189321, 0.05),
       (19, 23108932189, 0.05),
       (20, 64893589, 0.05);
INSERT INTO product_category
VALUES (1, 'fruits'),
       (2, 'drinks'),
       (3, 'vegetables'),
       (4, 'fish'),
       (5, 'meet'),
       (6, 'grocery');
INSERT INTO product_title(id, title, product_category_id)
VALUES (1, 'Red Apple', 1),
       (2, 'Banana', 1),
       (3, 'Orange', 1),
       (4, 'Water', 2),
       (5, 'Juice', 2),
       (6, 'Cola', 2),
       (7, 'Carrot', 3),
       (8, 'Potato', 3),
       (9, 'Cabbage', 3),
       (10, 'Tomato', 3),
       (11, 'Lemon', 1),
       (12, 'Beer', 2),
       (13, 'Cod', 4),
       (14, 'Pike', 4),
       (15, 'carp', 4),
       (16, 'Vodka', 2),
       (17, 'strawberry', 1),
       (18, 'blueberry', 1),
       (19, 'onion', 3),
       (20, 'Shark', 4);
INSERT INTO manufacturer(id, name)
VALUES (1, 'First manufacturer'),
       (2, 'Second manufacturer'),
       (3, 'Third manufacturer'),
       (4, 'Fourth manufacturer'),
       (5, 'Useless1 manufacturer'),
       (6, 'Useless2 manufacturer');
INSERT INTO product(id, product_title_id, manufacturer_id, price, comment)
VALUES (1, 1, 1, 10.11, 'Sweet apple'),
       (2, 1, 2, 5.05, 'Small apple'),
       (3, 2, 3, 15, 'African Banana'),
       (4, 2, 4, 20, 'Brazilian Banana'),
       (5, 3, 1, 16.2, 'Ukrainian Orange'),
       (6, 3, 2, 12, 'Italian Orange'),
       (7, 4, 3, 13, 'Clear water'),
       (8, 4, 4, 50, 'Sweet water'),
       (9, 5, 1, 100, 'Orange Juice'),
       (10, 5, 2, 120, 'Banana Juice'),
       (11, 6, 3, 60, 'Coca Cola'),
       (12, 6, 4, 5.50, 'Pepsi Cola'),
       (13, 7, 1, 12.23, 'Big carrot'),
       (14, 7, 2, 10.02, 'Small carrot'),
       (15, 8, 3, 89, 'big potato'),
       (16, 8, 1, 88.99, 'ukrainian potato'),
       (17, 9, 4, 32, 'Green Cabbage'),
       (18, 9, 1, 33.33, 'Typical cabbage'),
       (19, 10, 2, 44.44, 'Yellow tomato'),
       (20, 10, 3, 55.55, 'Pink tomato'),
       (21, 15, 4, 10.11, 'blue carp'),
       (22, 15, 1, 5.05, 'big carp'),
       (23, 16, 2, 15, 'ocean shark'),
       (24, 16, 3, 20, 'white shark'),
       (25, 16, 4, 16.2, 'orange shark'),
       (26, 16, 1, 12, 'red shark'),
       (27, 15, 2, 13, 'carpik'),
       (28, 15, 3, 50, 'small carp'),
       (29, 5, 4, 100, 'Orange Juice'),
       (30, 5, 3, 120, 'Banana Juice'),
       (31, 6, 2, 60, 'Coca Cola'),
       (32, 6, 1, 5.50, 'Pepsi Cola'),
       (33, 7, 4, 12.23, 'Big carrot'),
       (34, 7, 3, 10.02, 'Small carrot'),
       (35, 8, 2, 89, 'big potato'),
       (36, 8, 4, 88.99, 'ukrainian potato'),
       (37, 9, 2, 32, 'Green Cabbage'),
       (38, 9, 3, 33.33, 'Typical cabbage'),
       (39, 10, 1, 44.44, 'Yellow tomato'),
       (40, 10, 4, 55.55, 'Pink tomato'),
       (41, 1, 4, 5.50, 'Sweet apple'),
       (42, 1, 3, 12.23, 'Russian apple'),
       (43, 2, 2, 10.02, 'green banana but good'),
       (44, 2, 1, 89, 'african banana'),
       (45, 3, 4, 88.99, 'italian orange'),
       (46, 3, 2, 32, 'greece orange'),
       (47, 4, 2, 33.33, 'crystal water'),
       (48, 4, 1, 44.44, 'soda water');
INSERT INTO customer_order(id, operation_time, supermarket_id, customer_id)
VALUES (1, '2020-01-01', 1, 1),
       (2, '2020-02-02', 2, 2),
       (3, '2020-02-02', 3, 3),
       (4, '2020-03-03', 4, 4),
       (5, '2020-04-04', 5, 5),
       (6, '2020-05-05', 6, 6),
       (7, '2020-06-06', 7, 7),
       (8, '2020-07-07', 1, 8),
       (9, '2020-08-08', 2, 9),
       (10, '2020-09-11', 3, 10),
       (11, '2020-10-10', 4, 11),
       (12, '2020-11-11', 5, 12),
       (13, '2021-01-01', 6, 13),
       (14, '2021-01-01', 7, 14),
       (15, '2022-01-01', 8, 15),
       (16, '2022-01-01', 9, 1),
       (17, '2021-01-01', 11, 2),
       (18, '2019-01-01', 12, 3),
       (19, '2017-01-01', 13, 4),
       (20, '2018-01-01', 14, 5),
       (21, '2016-02-02', 1, 6),
       (22, '2019-03-03', 2, 7),
       (23, '2019-02-02', 3, 8),
       (24, '2019-03-03', 4, 9),
       (25, '2022-02-02', 5, 10),
       (26, '2022-02-02', 6, 11),
       (27, '2022-01-01', 7, 1),
       (28, '2021-10-10', 11, 2),
       (29, '2022-03-03', 12, 3),
       (30, '2022-03-13', 13, 4),
       (31, '2021-10-03', 4, 5),
       (32, '2020-11-11', 5, 1),
       (33, '2021-01-01', 6, 2),
       (34, '2021-01-01', 7, 3),
       (35, '2022-01-01', 11, 10),
       (36, '2022-01-01', 12, 1),
       (37, '2021-01-01', 2, 6),
       (38, '2019-01-01', 13, 7),
       (39, '2017-01-01', 14, 8),
       (40, '2018-01-01', 15, 9),
       (41, '2022-01-01', 2, 10),
       (42, '2021-01-01', 2, 11),
       (43, '2019-01-01', 3, 12),
       (44, '2017-01-01', 4, 13),
       (45, '2018-01-01', 5, 14),
       (46, '2022-12-11', 2, null),
       (47, '2021-12-11', 2, null),
       (48, '2019-10-11', 3, null),
       (49, '2017-09-10', 4, null),
       (50, '2018-07-08', 5, null);
INSERT INTO order_details(id, customer_order_id, product_id, price, price_with_discount, product_amount)
VALUES (1, 1, 1, 20, 5, 4),
       (2, 2, 2, 80, 10, 5),
       (3, 3, 3, 90, 10, 6),
       (4, 4, 4, 30, 5, 2),
       (5, 5, 5, 40, 5, 1),
       (6, 6, 6, 50, 5, 3),
       (7, 7, 7, 60, 5, 11),
       (8, 8, 8, 70, 5, 13),
       (9, 9, 9, 80, 5, 14),
       (10, 10, 10, 90, 2, 2),
       (11, 11, 11, 120, 3, 1),
       (12, 12, 12, 130, 50, 5),
       (13, 13, 13, 40, 8, 6),
       (14, 14, 14, 50, 7, 7),
       (15, 15, 15, 33, 6, 8),
       (16, 16, 16, 44, 5, 10),
       (17, 16, 16, 55, 4, 4),
       (18, 17, 17, 66, 3, 5),
       (19, 17, 20, 77, 11, 3),
       (20, 18, 19, 88, 5, 4),
       (21, 18, 20, 99, 5, 4),
       (22, 19, 21, 80, 10, 5),
       (23, 19,22, 90, 10, 6),
       (24, 20, 23, 110, 5, 9),
       (25, 20, 24, 120, 5, 8),
       (26, 21, 25, 130, 5, 12),
       (27, 21, 26, 140, 5, 11),
       (28, 22, 27, 50, 5, 13),
       (29,22, 28, 60, 5, 3),
       (30, 23, 29, 300, 5, 4),
       (31, 23, 30, 40, 5, 5),
       (32, 24, 31, 144, 5, 6),
       (33, 24, 32, 120, 5, 7),
       (34, 25, 33, 122, 5, 8),
       (35, 25, 34, 134, 100, 9),
       (36, 26, 35, 153, 110, 1),
       (37, 26, 36, 50, 23, 1),
       (38, 27, 37, 32, 21, 1),
       (39, 27, 38, 30, 29, 3),
       (40, 28, 39, 40, 39, 4),
       (41, 28, 40, 50, 40, 5),
       (42, 28, 41, 80, 10, 6),
       (43, 29, 42, 90, 10, 7),
       (44, 29, 43, 200, 100, 10),
       (45, 29,44, 100, 50, 3),
       (46, 30, 45, 20, 5, 4),
       (47, 30, 45, 34, 30, 11),
       (48, 30, 8, 50, 40, 13),
       (49, 31, 9, 50, 50, 14),
       (50, 31, 10, 60, 50, 2),
       (51, 31, 11, 70, 50, 1),
       (52, 32, 12, 80, 50, 4),
       (53, 32, 13, 90, 50, 5),
       (54, 32, 14, 111, 50, 12),
       (55, 33, 15, 112, 100, 20),
       (56, 33, 16, 10, 5, 10),
       (57, 33, 17, 20, 10, 23),
       (58, 34, 18, 30, 20, 1),
       (59, 34, 19, 40, 30, 2),
       (60, 34, 20, 50, 40, 3),
       (61, 35, 21, 60, 50, 6),
       (62, 35, 22, 80, 30, 8),
       (63, 35, 23, 90, 40, 9),
       (64, 36, 24, 5, 2, 10),
       (65, 36, 25, 12, 10, 2),
       (66, 36, 26, 11, 10, 3),
       (67, 37, 27, 13, 5, 6),
       (68, 37, 28, 14, 5, 7),
       (69, 37, 29, 15, 5, 8),
       (70, 38, 30, 21, 20, 15),
       (71, 38, 31, 31, 20, 1),
       (72, 38, 32, 41, 20, 2),
       (73, 39, 33, 50, 30, 5),
       (74, 39, 34, 60, 50, 4),
       (75, 39, 35, 23, 20, 6),
       (76, 39, 36, 41, 30, 7),
       (77, 40, 37, 51, 30, 8),
       (78, 40, 38, 93, 80, 4),
       (79, 40, 39, 21, 15, 5),
       (80, 40, 40, 34, 20, 6),
       (81, 41, 41, 56, 50, 7),
       (82, 41, 42, 80, 50, 8),
       (83, 41, 43, 90, 70, 2),
       (84, 41, 44, 65, 50, 3),
       (85, 42, 45, 122, 100, 4),
       (86, 42, 6, 134, 100, 12),
       (87, 42, 7, 155, 100, 11),
       (88, 42, 8, 166, 100, 13),
       (89, 42, 9, 1, 0, 14),
       (90, 43, 10, 3, 0, 15),
       (91, 43, 11, 4, 0, 1),
       (92, 43, 12, 54, 0, 5),
       (93, 43, 13, 34, 0, 6),
       (94, 44, 14, 87, 0, 7),
       (95, 44, 15, 15, 0, 2),
       (96, 44, 16, 14, 0, 3),
       (97, 44, 17, 123, 0, 1),
       (98, 45, 18, 11, 0, 1),
       (99, 46, 14, 87, 0, 7),
       (100, 47, 15, 15, 0, 2),
       (101, 48, 16, 14, 0, 3),
       (102, 49, 17, 123, 0, 1),
       (103, 50, 18, 11, 0, 1);
UPDATE order_details
SET price_with_discount = (COALESCE((SELECT price * (1 - discount)
					                 FROM customer
                                     LEFT JOIN customer_order co ON customer.person_id = co.customer_id
                                     WHERE customer_order_id = co.id), price))
WHERE TRUE;
